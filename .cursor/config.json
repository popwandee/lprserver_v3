{
  "project": "lpr-monorepo",
  "language": "python",
  "monorepo": true,
  "paths": {
    "server": "server/",
    "edge": "edge/",
    "share": "share/"
  },
  "search": {
    "ignore": ["**/venv/**", "**/.venv/**", "**/__pycache__/**", "**/*.log", "**/node_modules/**"]
  },
  "snippets": {
    "server_run_dev": {
      "description": "Run server in dev mode",
      "command": "cd server && source .venv/bin/activate || python3 -m venv .venv && source .venv/bin/activate && pip install -r requirements.txt && python run.py"
    },
    "server_run_prod": {
      "description": "Run server via gunicorn",
      "command": "cd server && source .venv/bin/activate && gunicorn -w 4 -b 0.0.0.0:8000 wsgi:app"
    },
    "edge_run_dev": {
      "description": "Run edge app on device",
      "command": "cd edge && bash setup_env.sh && gunicorn --config gunicorn_config.py v1_3.src.wsgi:app"
    },
    "subtree_pull_edge": {
      "description": "Sync edge subtree with upstream aicamera",
      "command": "git fetch edge-origin && git subtree pull --prefix=edge edge-origin main -m 'chore(edge): pull upstream'"
    }
  },
  "formatting": {
    "python": {
      "style": "pep8",
      "lineLength": 100
    }
  },
  "assistant": {
    "defaultPrompts": [
      "Follow .cursorrules SOP. Keep edits scoped to server/, edge/, or share/.",
      "When adding config, align with server/config.py and server/env.example.",
      "When changing connectivity, keep WebSocket primary and MQTT topics per server/mqtt_config.py."
    ]
  }
}